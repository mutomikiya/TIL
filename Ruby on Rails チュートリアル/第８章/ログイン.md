# ログイン中のユーザーを取り出す
- セッションの中に安全に置けるようになったユーザーIDを別のページで取り出せるようにする

  - ログイン中のユーザーがいる場合（```if session[:user_id]```)、そのユーザーオブジェクトを@current_userというインスタンス変数に保存する
  （```@current_user ||= User.find_by(id: session[:user_id])```）
# レイアウトの変更
- まず、ログインしていればtrue、その他ならfalseを返すlogged_in?メソッドを定義する  
```
  def logged_in?
    !current_user.nil?
  end
  ```
- if else文を使って、ログインしている場合としていない場合でレイアウトのリンクを変更する
  - bootstrapのドロップダウン機能も適用
# ログイン中とログアウト中でレイアウトが変わっているかのテスト
- テスト時に登録済みユーザーとしてログインするために、テスト用データをfixtureで作成する
- password_digest属性を追加するために、まず渡された文字列のハッシュ値を返すメソッドをモデルに追加し、fixtureでpassword_digest属性を追加
- あとは、ログインした状態でユーザーのページにリダイレクトされるか、リダイレクト先はあっているか、login_pathは存在しないか、logout_pathが存在するか、
user_pathが存在するか、をテストに追加する
# ユーザー登録時にログイン
- usersコントローラにlog_inメソッドを追加するだけ
